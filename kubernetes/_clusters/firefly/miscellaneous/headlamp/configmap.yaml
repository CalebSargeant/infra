apiVersion: v1
kind: ConfigMap
metadata:
  name: kubernetes-dashboard-values
  namespace: misc
data:
  values.yaml: |
    # Disable extras/serviceMonitor
    extras:
      serviceMonitor:
        enabled: false

    # Kong ingress settings
    kong:
      proxy:
        http:
          enabled: true

    # App settings with skip-login
    app:
      ingress:
        enabled: true
        ingressClassName: traefik
        hosts:
          - dashboard.sargeant.co
        tls:
          enabled: true
          secretName: dashboard-tls
        annotations:
          cert-manager.io/cluster-issuer: letsencrypt-dns

      settings:
        global:
          clusterName: firefly
          itemsPerPage: 50

      scheduling:
        nodeSelector:
          type: pi

    # Auth settings - use ServiceAccount
    auth:
      extraArgs:
        - --enable-skip-login
        - --enable-insecure-login
      serviceAccount:
        create: false
        name: dashboard-admin

    # Minimal resources
    api:
      resources:
        requests:
          cpu: 50m
          memory: 64Mi
        limits:
          cpu: 200m
          memory: 128Mi

    web:
      resources:
        requests:
          cpu: 50m
          memory: 64Mi
        limits:
          cpu: 200m
          memory: 128Mi
