apiVersion: v1
kind: ConfigMap
metadata:
  name: headlamp-values
  namespace: misc
data:
  values.yaml: |
    ingress:
      enabled: true
      hosts:
        - host: headlamp.sargeant.co
          paths:
            - path: /
              type: ImplementationSpecific
    
    # Run on Pi nodes
    nodeSelector:
      type: pi
    
    # Minimal resources
    resources:
      requests:
        cpu: 50m
        memory: 64Mi
      limits:
        cpu: 200m
        memory: 128Mi
    
    # Configure KUBECONFIG environment variable to include mounted kubeconfigs
    env:
      - name: KUBECONFIG
        value: /etc/kubernetes/admin.conf:/kubeconfigs/external
    
    # Mount external cluster kubeconfig from secret
    volumeMounts:
      - name: external-kubeconfig
        mountPath: /kubeconfigs
        readOnly: true
    
    volumes:
      - name: external-kubeconfig
        secret:
          secretName: headlamp-staging-kubeconfig
