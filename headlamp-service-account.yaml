---
---
apiVersion: v1
kind: Namespace
metadata:
  name: headlamp
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: headlamp-admin
  namespace: headlamp
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: headlamp-admin-binding
subjects:
- kind: ServiceAccount
  name: headlamp-admin
  namespace: headlamp
roleRef:
  kind: ClusterRole
  name: cluster-admin
  apiGroup: rbac.authorization.k8s.io
---
apiVersion: v1
kind: Secret
metadata:
  name: headlamp-admin-token
  namespace: headlamp
  annotations:
    kubernetes.io/service-account.name: "headlamp-admin"
type: kubernetes.io/service-account-token

#SECRET=$(kubectl get sa headlamp-admin -n headlamp -o jsonpath="{.secrets[0].name}")
#TOKEN=$(kubectl get secret $SECRET -n kube-system -o jsonpath="{.data.token}" | base64 -d)

### Kubeconfig
#apiVersion: v1
#kind: Config
#clusters:
#- name: staging
#  cluster:
#    server: https://<staging-eks-endpoint>
#    certificate-authority-data: <base64-ca-data>
#
#contexts:
#- name: staging
#  context:
#    cluster: staging
#    user: staging-sa
#
#current-context: staging
#
#users:
#- name: staging-sa
#  user:
#    token: "<TOKEN_HERE>"